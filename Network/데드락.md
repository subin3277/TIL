- 교착상태(데드락, Deadlock)의 개념과 조건

Q. 교착상태란 무엇인가요

A. 교착상태란 **두 개이상의 프로세스가** 자원을 점유한 상태에서 서로 다른 프로세스가 점유하고 있는 자원을 요구하며, 서로의 작업을 끝나기만을 기다리며 둘 다 **영원히 끝나지 않는 상황**을 뜻합니다.

Q. 교착상태의 발생조건

A. 4가지가 있습니다.

- 상호배제(Mutual Exclusion) : 한 번에 한개의 프로세스만이 공유자원을 사용할 수 있음.
- 점유 대기(Hold and Wait) : 프로세스가 할당된 자원을 가진 상태에서 다른 자원을 기다림.
- 비선점(No Preemprion) : 프로세스가 작업을 마친 후 자원을 자발적으로 반환할 때까지 기다림
- 순환대기(Circular Wait) : 프로세스의 자원 점유 및 점유된 자원의 요구관계가 원형을 이루면서 대기하는 조건.

위 4가지 조건이 모두 만족되는 경우에 발생할 수 있습니다.

Q. 교착상태 해결방법

A. 예방, 회피, 탐지, 회복

- 예방 : 교착상태 발생조건 4가지 중에 하나를 부정한다.
- 회피 : 교착상태가 발생할 가능성이 있는 자원 할당을 하지 않고 안전한 상태에서만 자원요청을 허용하는 방법.
- 탐지 : 데드락이 발생했는지 여부를 탐색하고 회복기법 알고리즘을 활용하는 것.
- 회복 : 교착상태가 발생했을 때 사용자 처리, 시스템 처리 방법으로 해결하는 것.

---

교착상태 해결 방법

- 예방
    - 상호 배제 부정
        - 여러 개의 프로세스가 동시에 공유자원을 사용할 수 있음
    - 점유 대기 부정
        - 프로세스가 실행되기 전에 필요한 모든 자원을 할당하여 프로세스 대기를 없애거나,
        - 자원이 점유되지 않은 상태에서만 자원 요청을 받도록 한다
    - 비선점 부정
        - 모든 자원에 대한 선점을 허용
    - 순환 대기 부정
        - 자원을 선형으로 분류하여 고유 번호를 할당하고, 각 프로세스는 현재 점유한 자원의 고유번호보다 앞이나 뒤 한쪽 방향으로만 자원을 요구하도록 한다.
    - 하지만 이런 방법으로 방지하면 시스템 처리량이나 자원 사용의 효율성을 떨어뜨린다.
- 회피
    
    회피를 하기 위해서는 4가지의 가정이 필요하다
    
    - 프로세스 수 고정
    - 자원의 종류와 수 고정
    - 프로세스가 요구하는 최대 자원의 수를 알아야함
    - 프로세스는 자원 사용 후 반드시 반납
- 회복
    - 사용자 처리
        - 교착상태에 있는 프로세스 중 하나의 프로세스를 사용자가 강제 종료
    - 시스템 처리
        - 프로세스 중지
            - 교착상태에 속해있는 모든 프로세스를 중지
            - 교착상태가 해결될 때까지 한 프로세스씩 중지
        - 자원 선점
            - 프로세스들로부터 자원을 빼앗아 교착상태가 해결될때까지 다른 프로세스들에게 자원 할당